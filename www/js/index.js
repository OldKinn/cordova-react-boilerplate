require.config({baseUrl:"./",paths:{EventEmitter:"public/assets/libs/EventEmitter.min"}}),require(["EventEmitter"],function(n){var e={initialize:function(){this.bindEvents()},bindEvents:function(){document.addEventListener("deviceready",e.onDeviceReady,!1)},onDeviceReady:function(){document.addEventListener("backbutton",e.handleBackButton,!1),require(["public/bundle"])},handleBackButton:function(){e.confirm("确定退出程序？",["退出","取消"],function(n){1==n&&navigator.app.exitApp()})},confirm:function(n,e,t){navigator.notification.confirm(n,function(n){t(n)},"操作确认",e)},request:function(n,e,t){var i=!1,r=setTimeout(function(){i||(i=!0,t(new Error("服务器请求超时")))},1e4);cordovaHTTP.get(n,e,{},function(n){if(i)return!1;clearTimeout(r);try{var e=JSON.parse(n.data);t(null,e)}catch(o){t(o)}},function(n){return!i&&(clearTimeout(r),void t(new Error(n.error)))})}};e.initialize();var t=window.bus=new n;t.addListener("login",function(n,e){setTimeout(function(){e(null,{success:!0,message:"登录成功",content:{userName:"张三"}})},1e3)}),t.addListener("take picture",function(n,e){navigator.camera.getPicture(function(n){e(null,n)},function(n){"Camera cancelled."==n&&(n="取消拍照"),e(new Error(n))},n)})});